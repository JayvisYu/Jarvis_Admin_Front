{"remainingRequest":"/Users/jarvisyu/05_hobbies/Jarvis_Admin/frontend/vue-admin-template/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jarvisyu/05_hobbies/Jarvis_Admin/frontend/vue-admin-template/src/components/HeaderSearch/index.vue?vue&type=style&index=0&id=032bd1f0&lang=scss&scoped=true&","dependencies":[{"path":"/Users/jarvisyu/05_hobbies/Jarvis_Admin/frontend/vue-admin-template/src/components/HeaderSearch/index.vue","mtime":1626619590873},{"path":"/Users/jarvisyu/05_hobbies/Jarvis_Admin/frontend/vue-admin-template/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jarvisyu/05_hobbies/Jarvis_Admin/frontend/vue-admin-template/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jarvisyu/05_hobbies/Jarvis_Admin/frontend/vue-admin-template/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jarvisyu/05_hobbies/Jarvis_Admin/frontend/vue-admin-template/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jarvisyu/05_hobbies/Jarvis_Admin/frontend/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jarvisyu/05_hobbies/Jarvis_Admin/frontend/vue-admin-template/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5oZWFkZXItc2VhcmNoIHsKCWZvbnQtc2l6ZTogMCAhaW1wb3J0YW50OwoKCS5zZWFyY2gtaWNvbiB7CgkJY3Vyc29yOiBwb2ludGVyOwoJCWZvbnQtc2l6ZTogMThweDsKCQl2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwoJfQoKCS5oZWFkZXItc2VhcmNoLXNlbGVjdCB7CgkJZm9udC1zaXplOiAxOHB4OwoJCXRyYW5zaXRpb246IHdpZHRoIDAuMnM7CgkJd2lkdGg6IDA7CgkJb3ZlcmZsb3c6IGhpZGRlbjsKCQliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKCQlib3JkZXItcmFkaXVzOiAwOwoJCWRpc3BsYXk6IGlubGluZS1ibG9jazsKCQl2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwoKCQk6OnYtZGVlcCAuZWwtaW5wdXRfX2lubmVyIHsKCQkJYm9yZGVyLXJhZGl1czogMDsKCQkJYm9yZGVyOiAwOwoJCQlwYWRkaW5nLWxlZnQ6IDA7CgkJCXBhZGRpbmctcmlnaHQ6IDA7CgkJCWJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDsKCQkJYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkOWQ5ZDk7CgkJCXZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CgkJfQoJfQoKCSYuc2hvdyB7CgkJLmhlYWRlci1zZWFyY2gtc2VsZWN0IHsKCQkJd2lkdGg6IDIxMHB4OwoJCQltYXJnaW4tbGVmdDogMTBweDsKCQl9Cgl9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/HeaderSearch","sourcesContent":["<template>\n\t<div\n\t\t:class=\"{'show':show}\"\n\t\tclass=\"header-search\"\n\t>\n\t\t<svg-icon\n\t\t\tclass-name=\"search-icon\"\n\t\t\ticon-class=\"search\"\n\t\t\t@click.stop=\"click\"\n\t\t/>\n\t\t<el-select\n\t\t\tref=\"headerSearchSelect\"\n\t\t\tv-model=\"search\"\n\t\t\t:remote-method=\"querySearch\"\n\t\t\tfilterable\n\t\t\tdefault-first-option\n\t\t\tremote\n\t\t\tplaceholder=\"Search\"\n\t\t\tclass=\"header-search-select\"\n\t\t\t@change=\"change\"\n\t\t>\n\t\t\t<el-option\n\t\t\t\tv-for=\"item in options\"\n\t\t\t\t:key=\"item.path\"\n\t\t\t\t:value=\"item\"\n\t\t\t\t:label=\"item.title.join(' > ')\"\n\t\t\t/>\n\t\t</el-select>\n\t</div>\n</template>\n\n<script>\n// fuse is a lightweight fuzzy-search module\n// make search results more in line with expectations\nimport Fuse from 'fuse.js'\nimport path from 'path'\n\nexport default {\n\tname: 'HeaderSearch',\n\tdata () {\n\t\treturn {\n\t\t\tsearch: '',\n\t\t\toptions: [],\n\t\t\tsearchPool: [],\n\t\t\tshow: false,\n\t\t\tfuse: undefined\n\t\t}\n\t},\n\tcomputed: {\n\t\troutes () {\n\t\t\treturn this.$store.getters.permission_routes\n\t\t}\n\t},\n\twatch: {\n\t\troutes () {\n\t\t\tthis.searchPool = this.generateRoutes(this.routes)\n\t\t},\n\t\tsearchPool (list) {\n\t\t\tthis.initFuse(list)\n\t\t},\n\t\tshow (value) {\n\t\t\tif (value) {\n\t\t\t\tdocument.body.addEventListener('click', this.close)\n\t\t\t} else {\n\t\t\t\tdocument.body.removeEventListener('click', this.close)\n\t\t\t}\n\t\t}\n\t},\n\tmounted () {\n\t\tthis.searchPool = this.generateRoutes(this.routes)\n\t},\n\tmethods: {\n\t\tclick () {\n\t\t\tthis.show = !this.show\n\t\t\tif (this.show) {\n\t\t\t\tthis.$refs.headerSearchSelect && this.$refs.headerSearchSelect.focus()\n\t\t\t}\n\t\t},\n\t\tclose () {\n\t\t\tthis.$refs.headerSearchSelect && this.$refs.headerSearchSelect.blur()\n\t\t\tthis.options = []\n\t\t\tthis.show = false\n\t\t},\n\t\tchange (val) {\n\t\t\tthis.$router.push(val.path)\n\t\t\tthis.search = ''\n\t\t\tthis.options = []\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.show = false\n\t\t\t})\n\t\t},\n\t\tinitFuse (list) {\n\t\t\tthis.fuse = new Fuse(list, {\n\t\t\t\tshouldSort: true,\n\t\t\t\tthreshold: 0.4,\n\t\t\t\tlocation: 0,\n\t\t\t\tdistance: 100,\n\t\t\t\tmaxPatternLength: 32,\n\t\t\t\tminMatchCharLength: 1,\n\t\t\t\tkeys: [{\n\t\t\t\t\tname: 'title',\n\t\t\t\t\tweight: 0.7\n\t\t\t\t}, {\n\t\t\t\t\tname: 'path',\n\t\t\t\t\tweight: 0.3\n\t\t\t\t}]\n\t\t\t})\n\t\t},\n\t\t// Filter out the routes that can be displayed in the sidebar\n\t\t// And generate the internationalized title\n\t\tgenerateRoutes (routes, basePath = '/', prefixTitle = []) {\n\t\t\tlet res = []\n\n\t\t\tfor (const router of routes) {\n\t\t\t\t// skip hidden router\n\t\t\t\tif (router.hidden) { continue }\n\n\t\t\t\tconst data = {\n\t\t\t\t\tpath: path.resolve(basePath, router.path),\n\t\t\t\t\ttitle: [...prefixTitle]\n\t\t\t\t}\n\n\t\t\t\tif (router.meta && router.meta.title) {\n\t\t\t\t\tdata.title = [...data.title, router.meta.title]\n\n\t\t\t\t\tif (router.redirect !== 'noRedirect') {\n\t\t\t\t\t\t// only push the routes with title\n\t\t\t\t\t\t// special case: need to exclude parent router without redirect\n\t\t\t\t\t\tres.push(data)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// recursive child routes\n\t\t\t\tif (router.children) {\n\t\t\t\t\tconst tempRoutes = this.generateRoutes(router.children, data.path, data.title)\n\t\t\t\t\tif (tempRoutes.length >= 1) {\n\t\t\t\t\t\tres = [...res, ...tempRoutes]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn res\n\t\t},\n\t\tquerySearch (query) {\n\t\t\tif (query !== '') {\n\t\t\t\tthis.options = this.fuse.search(query)\n\t\t\t} else {\n\t\t\t\tthis.options = []\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.header-search {\n\tfont-size: 0 !important;\n\n\t.search-icon {\n\t\tcursor: pointer;\n\t\tfont-size: 18px;\n\t\tvertical-align: middle;\n\t}\n\n\t.header-search-select {\n\t\tfont-size: 18px;\n\t\ttransition: width 0.2s;\n\t\twidth: 0;\n\t\toverflow: hidden;\n\t\tbackground: transparent;\n\t\tborder-radius: 0;\n\t\tdisplay: inline-block;\n\t\tvertical-align: middle;\n\n\t\t::v-deep .el-input__inner {\n\t\t\tborder-radius: 0;\n\t\t\tborder: 0;\n\t\t\tpadding-left: 0;\n\t\t\tpadding-right: 0;\n\t\t\tbox-shadow: none !important;\n\t\t\tborder-bottom: 1px solid #d9d9d9;\n\t\t\tvertical-align: middle;\n\t\t}\n\t}\n\n\t&.show {\n\t\t.header-search-select {\n\t\t\twidth: 210px;\n\t\t\tmargin-left: 10px;\n\t\t}\n\t}\n}\n</style>\n"]}]}